<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Just For Me</title>
    <link rel="shortcut icon" href="img/Logo.png">
    <link rel="stylesheet" href="css/forRegister.css">
    <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
</head>
<body>
    <form th:action="@{/register}" method="post">
        <input type="text" id="username" name="username" placeholder="请输入您想要的用户名" required><br/>
        <label id="forUsername"></label><br/>
        <input type="password" id="password" name="password" placeholder="请输入您想要的密码" required><br/>
        <label id="forPassword"></label><br/>
        <input type="submit" value="提交">
    </form>
    <script type="text/javascript">
        $(function () {
            $("#username").blur(function () {
                let username = $("#username").val();
                $.ajax({
                    url: "/checkUsername",
                    data: {username: username},
                    async: true,
                    cache: false,
                    type: "post",
                    dataType: "json",
                    success: function (result) {
                        if (result) {
                            $("#forUsername").text("用户名可用").css("color", "greenyellow");
                        } else {
                            $("#forUsername").text("用户名已被使用或为空").css("color", "red");
                        }
                    }
                })
            })
        })
        $(function () {
            $("#password").blur(function () {
                let value = $("#password").val();
                if (value === "" || value.length < 8) {
                    $("#forPassword").text("密码长度不足8位").css("color", "red");
                } else {
                    $("#forPassword").text("密码可用").css("color", "greenyellow");
                }
            })
        })

    </script>
</body>
</html>